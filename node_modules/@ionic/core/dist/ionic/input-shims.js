/*!
 * (C) Ionic http://ionicframework.com - MIT License
 * Built with http://stenciljs.com
 */
const{h:t}=window.Ionic;import{k as n}from"./chunk-03ecffc3.js";const e=new WeakMap;function o(t,n,o,r=0){e.has(t)!==o&&(o?function(t,n,o){const r=n.parentNode,i=n.cloneNode(!1);i.classList.add("cloned-input"),i.tabIndex=-1,r.appendChild(i),e.set(t,i);const s="rtl"===t.ownerDocument.dir?9999:-9999;t.style.pointerEvents="none",n.style.transform=`translate3d(${s}px,${o}px,0) scale(0)`}(t,n,r):function(t,n){const o=e.get(t);o&&(e.delete(t),o.remove()),t.style.pointerEvents="",n.style.transform=""}(t,n))}function r(t){return t===t.getRootNode().activeElement}const i="input, textarea, [no-blur]",s=.3;function c(t,e,i,c){let a;const u=t=>{a=n(t)},l=u=>{if(!a)return;(function(t,n,e){if(a&&e){const t=a.x-e.x,n=a.y-e.y;return t*t+n*n>36}return!1})(0,0,n(u))||r(e)||(u.preventDefault(),u.stopPropagation(),function(t,n,e,r){const i=function(t,n,e){return function(t,n,e,o){const r=t.top,i=t.bottom,c=n.top+15,a=.5*Math.min(n.bottom,o-e)-i,u=c-r,l=Math.round(a<0?-a:u>0?-u:0),d=Math.abs(l);return{scrollAmount:l,scrollDuration:Math.min(400,Math.max(150,d/s)),scrollPadding:e,inputSafeY:4-(r-c)}}((t.closest("ion-item,[ion-item]")||t).getBoundingClientRect(),n.getBoundingClientRect(),e,window.innerHeight)}(t,e,r);Math.abs(i.scrollAmount)<4?n.focus():(o(t,n,!0,i.inputSafeY),n.focus(),e.scrollByPoint(0,i.scrollAmount,i.scrollDuration).then(()=>{o(t,n,!1,i.inputSafeY),n.focus()}))}(t,e,i,c))};return t.addEventListener("touchstart",u,!0),t.addEventListener("touchend",l,!0),()=>{t.removeEventListener("touchstart",u,!0),t.removeEventListener("touchend",l,!0)}}const a="$ionPaddingTimer";function u(t,n){if("INPUT"!==t.tagName)return;if(t.parentElement&&"ION-INPUT"===t.parentElement.tagName)return;const e=t.closest("ion-content");if(null===e)return;const o=e[a];o&&clearTimeout(o),n>0?e.style.setProperty("--keyboard-offset",`${n}px`):e[a]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px")},120)}const l=!0,d=!0;function f(t,n){const e=n.getNumber("keyboardHeight",290),s=n.getBoolean("scrollAssist",!0),a=n.getBoolean("hideCaretOnScroll",!0),f=n.getBoolean("inputBlurring",!0),m=n.getBoolean("scrollPadding",!0),p=new WeakMap,v=new WeakMap;function g(t){const n=(t.shadowRoot||t).querySelector("input"),i=t.closest("ion-content");if(n){if(i&&a&&!p.has(t)){const e=function(t,n,e){if(!e||!n)return()=>{};const i=e=>{r(n)&&o(t,n,e)},s=()=>o(t,n,!1),c=()=>i(!0),a=()=>i(!1);return e.addEventListener("ionScrollStart",c),e.addEventListener("ionScrollEnd",a),n.addEventListener("blur",s),()=>{e.removeEventListener("ionScrollStart",c),e.removeEventListener("ionScrollEnd",a),n.addEventListener("ionBlur",s)}}(t,n,i);p.set(t,e)}if(i&&s&&!v.has(t)){const o=c(t,n,i,e);v.set(t,o)}}}f&&l&&function(t){let n=!0,e=!1;t.addEventListener("ionScrollStart",function(){e=!0}),t.addEventListener("focusin",function(){n=!0},!0),t.addEventListener("touchend",function(o){if(e)return void(e=!1);const r=t.activeElement;if(!r)return;if(r.matches(i))return;const s=o.target;s!==r&&(s.matches(i)||s.closest(i)||(n=!1,setTimeout(()=>{n||r.blur()},50)))},!1)}(t),m&&d&&function(t,n){t.addEventListener("focusin",function(t){u(t.target,n)}),t.addEventListener("focusout",function(t){u(t.target,0)})}(t,e);const E=Array.from(t.querySelectorAll("ion-input"));for(const t of E)g(t);t.body.addEventListener("ionInputDidLoad",t=>{g(t.target)}),t.body.addEventListener("ionInputDidUnload",t=>{!function(t){if(a){const n=p.get(t);n&&n(),p.delete(t)}if(s){const n=v.get(t);n&&n(),v.delete(t)}}(t.target)})}export{f as startInputShims};